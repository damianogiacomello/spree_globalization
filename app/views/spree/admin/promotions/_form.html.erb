<script type="text/javascript">
	$(document).ready(function() {
		$("#tabs_p, #tabs_p2, #tabs_p3").tabs();
	});
</script>
<%= render :partial => 'spree/shared/error_messages', :locals => { :target => @promotion } %>
<div class="row">
  <div id="general_fields" class="alpha thirteen columns">
    <div class="alpha four columns">
<% if(Spree::Config[:locale].split(",").blank? && Spree::Config[:locale].split(",").count <= 1) %>
      <%= f.field_container :name do %>
        <%= f.label :name %>
        <%= f.text_field :name, :class => 'fullwidth' %>
      <% end %>
<% else %>
			<div id="tabs_p">
				<ul>
					<% Spree::Config[:locale].split(",").each do |locale| %>
					<li><%= link_to "#{locale.to_s.titleize}", "#tab_#{locale.to_s}"%></li>
					<% end %>
				</ul>
				<% Spree::Config[:locale].split(",").each do |locale| %>
				<div id="tab_<%= locale.to_s %>">
					<%= f.globalize_fields_for locale.to_sym do |g| %>
					<% [:name].each_with_index do |attr, i| %>
						<%= g.label attr, t(attr) %><br />
						<%= g.text_field attr, :class => 'fullwidth title'  %>
					<% end %>
					<% end %>
				</div>
				<% end %>
			</div>
<% end %>

      <%= f.field_container :event_name do %>
        <%= f.label :event_name %>
        <%= f.select :event_name, Spree::Activator.event_names.map{|name| [t("events.#{name}"), name] }, {}, {:class => 'select2 fullwidth'} %>
      <% end %>

<% if(Spree::Config[:locale].split(",").blank? && Spree::Config[:locale].split(",").count <= 1) %>
      <%= f.field_container :code do %>
        <%= f.label :code %>
        <%= f.text_field :code, :class => 'fullwidth' %>
      <% end %>

      <%= f.field_container :path do %>
        <%= f.label :path %>
        <%= f.text_field :path, :class => 'fullwidth' %>
      <% end %>
<% else %>
			<div id="tabs_p2">
				<ul>
					<% Spree::Config[:locale].split(",").each do |locale| %>
					<li><%= link_to "#{locale.to_s.titleize}", "#tab_cp_#{locale.to_s}"%></li>
					<% end %>
				</ul>
				<% Spree::Config[:locale].split(",").each do |locale| %>
				<div id="tab_cp_<%= locale.to_s %>">
					<%= f.globalize_fields_for locale.to_sym do |g| %>
					<% [:code, :path].each_with_index do |attr, i| %>
						<%= g.label attr, t(attr) %><br />
						<%= g.text_field attr, :class => 'fullwidth title'  %>
					<% end %>
					<% end %>
				</div>
				<% end %>
			</div>
<% end %>
      <%= f.field_container :advertise do %>
        <%= f.check_box :advertise %>
        <%= f.label :advertise %>
      <% end %>
    </div>

    <div id="tabs_p3" class="omega nine columns">
<% if(Spree::Config[:locale].split(",").blank? && Spree::Config[:locale].split(",").count <= 1) %>
      <%= f.field_container :description do %>
        <%= f.label :description %><br />
        <%= f.text_area :description, :rows => 7, :class => 'fullwidth' %>
      <% end %>
<% else %>
			<ul>
				<% Spree::Config[:locale].split(",").each do |locale| %>
				<li><%= link_to "#{locale.to_s.titleize}", "#tab_d_#{locale.to_s}"%></li>
				<% end %>
			</ul>
			<% Spree::Config[:locale].split(",").each do |locale| %>
			<div id="tab_d_<%= locale.to_s %>">
				<%= f.globalize_fields_for locale.to_sym do |g| %>
				<% [:description].each_with_index do |attr, i| %>
					<%= g.label attr, t(attr) %><br />
					<%= g.text_area attr, {:rows => 8, :class => 'fullwidth'} %>
				<% end %>
				<% end %>
			</div>
			<% end %>
<% end %>
    </div>
  </div>

  <div id="expiry_fields" class="three columns omega">
    <%= f.field_container :usage_limit do %>
      <%= f.label :usage_limit %><br />
      <%= f.number_field :usage_limit, :min => 0, :class => 'fullwidth' %><br>
      <%= t(:current_promotion_usage, :count => @promotion.credits_count) %>
    <% end %>
    
    <div id="starts_at_field" class="field">
      <%= f.label :starts_at %>
      <%= f.text_field :starts_at, :value => datepicker_field_value(@promotion.starts_at), :class => 'datepicker datepicker-from fullwidth' %>
    </div>

    <div id="expires_at_field" class="field">
      <%= f.label :expires_at %>
      <%= f.text_field :expires_at, :value => datepicker_field_value(@promotion.expires_at), :class => 'datepicker datepicker-to fullwidth' %>
    </div>
  </div>
</div>